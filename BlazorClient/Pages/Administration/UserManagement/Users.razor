@page "/UserManagement/Users"


<h3>@PageTitle</h3>
@if (_userList != null)
{
    <table class="table">
        <thead>
            <tr>
                <th>
                    UserName
                </th>
                <th>
                    Email
                </th>
                <th>
                   Assigned Roles
                </th>            
            </tr>
        </thead>
        <tbody>
            @for (int idx=0;  idx< _userList.Count(); idx++)            
            {
                var selectedUser = _userList[idx];
                <tr>
                    <td>
                        @selectedUser.Id
                    </td>
                    <td>
                        @selectedUser.Email
                    </td>
                    <td>
                         <ul>
                            @foreach(var roleName in selectedUser.RoleNames)
                            {
                                <li>@roleName</li>
                            }
                        </ul>
                    </td>      
                </tr>               
            }
        </tbody>
    </table>

    @*       
          <EditUserRole @bind-SelectedUser=selectedUser @bind-IsVisible=_editPermissions  ></EditUserRole> 
                         @if(!_editPermissions){
                            <a href="" @onclick="(() => _editPermissions =!_editPermissions)" @onclick:preventDefault > @selectedUser.RoleNames.Count()</a>
                     }    
    <EditForm Context="formContext" Model="changePasswordRequest" OnValidSubmit="ChangePassword"> 
        <div class="mb-3">
            <label for="password">Password</label>
            <InputText id="password" @bind-Value="changePasswordRequest.Password" class="form-control" type="password" />
            </div>
            <div class="mb-3">
            <label for="confirmpassword">Confirm New Password</label>
            <InputText id="confirmPassword" @bind-Value="changePasswordRequest.ConfirmPassword" class="form-control" type="password" />
            </div>
            <button type="submit" class="btn btn-primary">Change Password</button>
            </EditForm>*@
   } 



